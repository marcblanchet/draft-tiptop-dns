<?xml version="1.0" encoding="utf-8"?>
<?xml-model href="rfc7991bis.rnc"?>
<?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
<!DOCTYPE rfc [
<!ENTITY nbsp "&#160;">
<!ENTITY zwsp "&#8203;">
<!ENTITY nbhy "&#8209;">
<!ENTITY wj "&#8288;">
]>
<rfc xmlns:xi="http://www.w3.org/2001/XInclude" category="info" docName="draft-many-tiptop-dns-00" ipr="trust200902" obsoletes="" updates="" submissionType="IETF" xml:lang="en" version="3">
  <front>
    <title abbrev="DNS in Deep Space">Deployment and Use of the Domain Name System(DNS) in Deep Space</title>
    <seriesInfo name="Internet-Draft" value="draft-many-tiptop-dns-00"/>
    <author fullname="Marc Blanchet" initials="MB">
      <organization>Viagenie</organization>
      <address>
        <postal>
          <country>Canada</country>
        </postal>
        <email>marc.blanchet@viagenie.ca</email>
      </address>
    </author>
    <area>Internet</area>
    <workgroup>Internet Engineering Task Force</workgroup>
    <keyword>dtn</keyword>
    <keyword>dns</keyword>
    <keyword>space</keyword>
    <keyword>deep space</keyword>
    <abstract>
      <t>Deep space communications involve long delays (e.g., Earth to Mars has one-way delays 4-24 minutes) and intermittent communications, mainly because of orbital dynamics. This document lists operational methods to enable local DNS name resolving on celestial body networks such that there are no real-time query and response flow to the authoritative name servers on (Earth) Internet.</t>
    </abstract>
  </front>
  <middle>
    <section>
      <name>Introduction</name>
      <t>Deep space communications involve long delays (e.g., Earth to Mars has one-way delays 4-24 minutes) and intermittent communications, mainly because of orbital dynamics. To illustrate a simple example of intermittence, communications may be between a ground station on Earth to an asset on a planet through the use of an orbiter around that planet. That orbiter may have an overpass of 20 minutes every 2 hours. Therefore, continuous connectivity between the two endpoints cannot be assumed. However, as discussed in <xref target="I-D.many-tiptop-ip-architecture"/>, orbiters may temporarily store IP packets until the next communication window with the next hop appears. From the standpoint of the transport or upper application protocols, the one-way delay and the RTT will be stable while direct connectivity happens, and then jump to a large value while the orbiter is not reachable anymore, until it becomes reachable again. In some cases, where the asset is on a shadow side of a planet or Moon and while there is no full constellation of orbiters providing connectivity all around, the asset and Earth ground may never or rarely have a uninterrupted end2end path.
        <xref target="I-D.many-tiptop-usecase"/> provides more details about key characteristics of deep space communications and the use case of networking. </t>
      <t><xref target="I-D.many-tiptop-ip-architecture"/> discusses the use of the whole IP stack in this context. Domain name requests and response over long delays generate timeouts and when there is no reachability to the DNS server, requests will not be answered. Therefore, on celestial bodies IP networks, a local DNS infrastructure with all the needed names and values stored locally is needed. </t>
      <t>While this document uses deep space as the base use case, it may apply to other "mostly" isolated networks, such as IoT networks. Mostly isolated means that most of the time the network is isolated, but there are times where it is not isolated and then may receive zone transfers or other means to populate or update its name caches.</t>
      <section anchor="requirements">
        <name>Requirements Language</name>
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
          "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT
          RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
          interpreted as described in BCP 14 <xref target="RFC2119"/>
          <xref target="RFC8174"/> when, and only when, they appear in
          all capitals, as shown here.</t>
      </section>
    </section>
      <section>
          <name>Use Case and Requirements</name>
          <t>Given all the investment in technology, protocol, services, infrastructure, scrutiny and governance in place, the ability to use the current Internet DNS Root with DNSSEC even in deep space has a lot of merit compared to starting another root with another trust chain. In order to achive that goal, which is to keep the same DNS root and the current DNSSEC trust chain in deep space, domain data and all related keys necessary for local validation should also be stored locally.</t>
            <t>The requirements and characteristics for this document use case are:</t>
            <ul>
              <li>domains are under the unique DNS root<xref target="RFC2826"/></li>
              <li>the DNS root is deployed under some agreed community requirements<xref target="RFC7720"/></li>
              <li>ability to sometimes reach the celestial body network name servers from Earth Internet to update their data cache</li>
              <li>inability to do live DNS queries to the Internet DNS infrastructure from space</li>
              <li>multiple network and DNS operators may exist on the celestial body network, each managing their own namespace and/or caches</li>
            </ul>
      </section>
    <section>
      <name>Possible Approaches</name>
      <t>This section presents various approaches that should meet the requirements set in the previous section. These approaches use the <xref target="RFC8806"/> approach for root zones, but augment it for the whole needed name hierarchy.</t>
      <t>All approaches share similar naming infrastructure on the target celestial body network:</t>
      <ul>
        <li>One or more authoritative name server.</li>
        <li>One or more resolvers using the above authoritative servers (or additional servers) in their hints/cache file.</li>
        <li>hosts using the above resolvers.</li>
        <li>DNSSEC verifying resolvers have the root trust anchor<xref target="trust-anchor"/> in their configuration.</li>
      </ul>
      <t>"Target network" used in this document means the celestial body network.</t>
      <section>
        <name>Pre-walk of all needed names</name>
        <t>If one assumes that all names that will be used on the target network are known in advance, then queries walking the tree from the root down to the final name of all needed names can be done on Internet and the responses saved in a file, together with the appropriate DNSSEC records (TBD: should we list those: aka RRSIG, DS, DNSKEY). The records should contain values that are relevant to the celestial body network. For example, an IP address record such as an A or AAAA record should resolve to an IP address relevant and reachable on the target network.</t>
        <t>The resulting file containing all the records is uploaded to the authoritative name servers on the target network. </t>
        <t>The authoritative name servers should serve the root zone and all required domain tree records underneath as found above.</t>
        <t>If a name used on the celestial body network by the hosts or applications is not in the uploaded file served by the local name servers, then the request will timeout.</t>
        <t>If all needed DNSSEC material is not fully uploaded, then DNSSEC validation will fail.</t>
        <t>A method for syncing and updating all the updated records to the isolated network should be put in place, at the appropriate frequency. Typical DNS zone tranfer mechanism may not be suitable because TCP transport is likely not possible in deep space. In this case, other file transfer mechanisms may be used.</t>
        <t>Some DNS records have values containing other names, such as the SRV and CNAME records. The referenced names should also be "walked".</t>
        <t>This setup somewhat assumes that there is a single operator for the DNS authoritative infrastructure on the target network.</t>
      </section>
      <section>
        <name>Pre-fetch of all zones in the needed name hierarchy</name>
        <t>If one assumes that the name hierarchy is known for all needed names used on the target network and if the operator of the DNS infrastructure on the target network has access to all the zones of the hierarchy, then these zones are saved. They may need to be modified so that the NS glue records point to the appropriate local authoritative name servers. These zones are then uploaded to the authoritative name servers on the target network.</t>
        <t>The authoritative name servers should serve the root zone and all zones discussed above.</t>
        <t>This approach have less risk of missing a name since all names under the hierarchy are uploaded. However, if the zones are too big compared to the transfer capacity to the target network, then this solution is not appropriate. Moreover, it may be possible that most of the names in the uploaded zones will not be used, therefore it is a possible waste of resources (bandwidth, memory/cpu on server, ...). Therefore, careful consideration on the chosen hierarchy, specially the top-level domain, is relevant. Given deep space relative limited use networks, it would make sense to dedicate some top-level domain or subdomain for its needs. However, it is possible to remove all the non-needed record from the zones before uploading them to the target network DNS infrastructure, but then if some names are missing in this removal, the same issues from the previous approach appear. Moreover, DNSSEC validation will fail if records are removed from a signed zone.</t>
        <t>If all needed DNSSEC material is not fully uploaded, then DNSSEC validation will fail.</t>
        <t>A method for syncing and updating all the updated records to the target network should be put in place, at the appropriate frequency. Typical DNS zone tranfer mechanism may not be suitable because TCP transport is likely not possible in deep space. In this case, other file transfer mechanisms may be used.</t>
        <t>In the context of multiple operators on the target network, each one may do this process independently for its own zones, without having to rely on another party.</t>
      </section>
      <section>
          <name>Special zone</name>
          <t>Instead of fetching a whole zone containing a lot of non useful records, the manager of that zone creates a special version of the zone containing only the useful records and sign it. It is then sent to the target network DNS infrastructure. This approach is a combination of the previous approaches, but require careful management of the two versions of the zone. In terms of deployment and operations, it has the same properties as the zone pre-fetch approach.
          </t>
      </section>
    </section>
    <section>
      <name>Zone Transfer Considerations</name>
      <t>If DNS zone transfer is possible over the link between the Internet and the target network, then incremental zone transfer (aka IXFR) might be advised to minimize the use of the bandwidth and also minimize the data merge on the target DNS server.</t>
      <t>If DNS zone transfer is not possible or not optimal, than another file transfer mechanism should be used.</t>
    </section>
    <section>
      <name>DNSSEC Considerations</name>
      <t>Zones are signed at various frequencies based on the operator policies. If a signature on a record has expired, then DNSSEC validation will fail. Therefore, the frequency of uploading updated records should be higher than the frequency of the signing of the uploaded zones.</t>
      <t>Similarly, the key lifetimes, including the root zone anchor, should be monitored to make sure that new keys are uploaded before the old ones expire.</t>
      <t>Finally, the DNSSEC RR TTL values need to be longer than the update times.</t>
    </section>
    <section>
        <name>Crusing Spacecraft Considerations</name>
        <t>This document assumes a minimal infrastructure on a celestial body surface and vicinty network. As discussed in <xref target="I-D.many-tiptop-usecase"/>, there are other instances of IP networks in deep space. One of them is a cruising spacecraft which has non-continuous connectivity to Earth using a direct point-to-point link to Earth ground stations. A cruising spacecraft typically have a local IP network to connect the various payloads and computers together. Names may be used on the onboard network, either by a simple infrastructure as described in this document, or by other simpler means such as a static file distributed on all on-board computers. When the spacecraft lands or connects to an infrastructure network such as a celestial body surface network, some names may need to be updated to use the local DNS infrastructure. The transition is not discussed in this document.</t>
    </section>
    <section>
      <name>Network Operations Considerations</name>
      <t>Even with careful management, there is some probability that some applications or host on the target network will query names that were uploaded to the local DNS infrastructure, but refer to services or IP addresses that are not reachable from the target network. If the target network do have intermittent IP connectivity to Internet but the link is not appropriate for live queries, such as long delays in deep space, costly bandwidth or very small time window of reachability, then the network may try to route the packets to the Internet. Therefore, a mechanisms to signal unreachability may be appropriate to be setup at the edge of the target network.</t>
    </section>
    <section anchor="IANA">
      <name>IANA Considerations</name>
      <t>This memo includes no request to IANA.</t>
    </section>
    <section anchor="Security">
      <name>Security Considerations</name>
      <t>By expanding the use of the same Internet DNS root to space, the space IP network naming infrastructure is then secured at the same level as on Internet.</t>
    </section>
  </middle>
  <back>
    <references>
      <name>References</name>
      <references>
        <name>Normative References</name>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.2119.xml"/>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.8174.xml"/>
      </references>
      <references>
        <name>Informative References</name>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.2826.xml"/>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.7720.xml"/>
        <xi:include href="https://www.rfc-editor.org/refs/bibxml/reference.RFC.8806.xml"/>
        <reference anchor="trust-anchor" target="https://www.iana.org/dnssec/files">
          <front>
            <title>Trust Anchors and Keys</title>
            <author>
              <organization>IANA</organization>
            </author>
          </front>
        </reference>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml3/reference.I-D.many-tiptop-usecase.xml"/>
        <xi:include href="https://bib.ietf.org/public/rfc/bibxml3/reference.I-D.many-tiptop-ip-architecture.xml"/>
      </references>
    </references>
    <section anchor="Acknowledgements" numbered="false">
      <name>Acknowledgements</name>
      <t>The idea of the pre-walk was suggested by Warren Kumari. The idea of a special zone was suggested by Mark Andrews. All errors are authors'.</t>
    </section>
  </back>
</rfc>
